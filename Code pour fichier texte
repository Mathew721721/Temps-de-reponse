import serial
import time

# Configuration du port série
arduino_port = "COM8"  # Remplacez par le port correct
baud_rate = 9600
timeout = 1  # Délai de lecture

# Ouvrir la connexion série
ser = serial.Serial(arduino_port, baud_rate, timeout=timeout)
time.sleep(2)  # Attendre que l'Arduino redémarre après l'ouverture de la connexion

# Lecture des messages initiaux de l'Arduino
print("Lecture des messages initiaux...")
while ser.in_waiting > 0:
    data = ser.readline().decode('utf-8').strip()
    print(data)

# Envoyer la commande START
ser.write(b"START\n")
print("Commande START envoyée. Lecture des données...")

# Lecture des données
try:
    while True:
        if ser.in_waiting > 0:
            data = ser.readline().decode('utf-8').strip()
            print(data)  # Afficher les données reçues

            if "10 essais terminés" in data:
                print("Essais terminés. Vous pouvez relancer.")
                break
except KeyboardInterrupt:
    print("\nInterruption par l'utilisateur.")
finally:
    ser.close
